<body class="bg-cream text-charcoal scroll-smooth overflow-x-hidden">
    <!-- Fixed Table of Contents -->
    <nav class="toc-fixed" id="toc">
      <div class="mb-8">
        <h3 class="font-serif text-xl font-semibold text-forest mb-4">Contents</h3>
        <ul class="space-y-2 text-sm">
          <li>
            <a href="#introduction" class="citation-link hover:text-sage transition-colors">1. Introduction to VKU</a>
          </li>
          <li>
            <a href="#traffic-vision" class="citation-link hover:text-sage transition-colors">2. Traffic Vision &amp; Perception</a>
          </li>
          <li>
            <a href="#traffic-environment" class="citation-link hover:text-sage transition-colors">3. Traffic Environment</a>
          </li>
          <li>
            <a href="#traffic-dynamics" class="citation-link hover:text-sage transition-colors">4. Traffic Dynamics &amp; Physics</a>
          </li>
          <li>
            <a href="#traffic-tactics" class="citation-link hover:text-sage transition-colors">5. Traffic Tactics &amp; Strategy</a>
          </li>
        </ul>
      </div>

      <div class="mt-8 pt-6 border-t border-sage/30">
        <p class="text-xs text-stone italic">Interactive diagrams and practical exercises throughout</p>
      </div>
    </nav>

    <!-- Mobile TOC Toggle -->
    <button class="lg:hidden fixed top-4 left-4 z-50 bg-forest text-cream p-2 rounded-lg" onclick="toggleTOC()">
      <i class="fas fa-bars"></i>
    </button>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Hero Section -->
      <section class="bg-gradient-to-br from-cream via-white to-sage/20 px-8 py-16">
        <div class="max-w-6xl mx-auto">
          <div class="hero-grid">
            <div class="space-y-6">
              <h1 class="font-serif text-4xl md:text-6xl font-bold text-forest leading-tight italic">
                VKU: A Comprehensive Guide to
                <span class="text-sage">Road Safety and Awareness</span>
              </h1>
              <p class="text-xl text-stone leading-relaxed">
                The definitive textbook for Switzerland&#39;s mandatory Verkehrskundeunterricht, equipping new drivers with essential knowledge for safe and responsible participation in road traffic.
              </p>
              <div class="flex items-center space-x-4 text-sm text-stone">
                <span><i class="fas fa-clock mr-2"></i>8 Hours of Instruction</span>
                <span><i class="fas fa-certificate mr-2"></i>Mandatory Certification</span>
              </div>
            </div>
            <div class="relative">
              <img src="https://kimi-web-img.moonshot.cn/img/images.contenthub.dev/693dab7bc26a01a4836cba20ac9583399c492e51.jpg" alt="Aerial view of winding Swiss mountain road" class="rounded-2xl shadow-2xl w-full h-80 object-cover" size="medium" aspect="wide" style="photo" query="Swiss alpine road aerial perspective" referrerpolicy="no-referrer" data-modified="1" data-score="0.00"/>
              <div class="absolute inset-0 bg-gradient-to-t from-forest/20 to-transparent rounded-2xl"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Key Highlights -->
      <section class="px-8 py-12 bg-white">
        <div class="max-w-6xl mx-auto">
          <div class="grid md:grid-cols-4 gap-6">
            <div class="module-card p-6 rounded-xl">
              <i class="fas fa-eye text-3xl text-sage mb-4"></i>
              <h3 class="font-serif text-lg font-semibold text-forest mb-2">Traffic Vision</h3>
              <p class="text-sm text-stone">Understanding human perception and visual limitations in driving contexts</p>
            </div>
            <div class="module-card p-6 rounded-xl">
              <i class="fas fa-road text-3xl text-sage mb-4"></i>
              <h3 class="font-serif text-lg font-semibold text-forest mb-2">Traffic Environment</h3>
              <p class="text-sm text-stone">Analyzing road design, other users, and environmental factors</p>
            </div>
            <div class="module-card p-6 rounded-xl">
              <i class="fas fa-cogs text-3xl text-sage mb-4"></i>
              <h3 class="font-serif text-lg font-semibold text-forest mb-2">Traffic Dynamics</h3>
              <p class="text-sm text-stone">Vehicle physics, forces in motion, and stopping distances</p>
            </div>
            <div class="module-card p-6 rounded-xl">
              <i class="fas fa-shield-alt text-3xl text-sage mb-4"></i>
              <h3 class="font-serif text-lg font-semibold text-forest mb-2">Traffic Tactics</h3>
              <p class="text-sm text-stone">Defensive driving strategies and proactive safety measures</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Main Content Sections -->
      <div class="prose-custom max-w-4xl mx-auto px-8 py-12">

        <!-- Introduction -->
        <section id="introduction">
          <h1>1. Introduction to the VKU Course</h1>

          <h2>1.1 Purpose and Importance of the VKU</h2>

          <p>The <strong>Verkehrskundeunterricht (VKU)</strong>, or Road Safety Course, is a mandatory component of driver education in Switzerland, designed to equip new drivers with the essential knowledge and skills for safe and responsible participation in road traffic <a href="https://www.fahrschule-drivein.ch/was-ist-ein-vku-kurs-und-wozu-dient-er" class="citation-link" target="_blank">[505]</a>. Introduced in 1993, the VKU was established in response to a high incidence of accidents involving young, inexperienced drivers <a href="https://drivelab.ch/en/vku/" class="citation-link" target="_blank">[476]</a>.</p>

          <blockquote>
            &#34;The primary objective of the course is to reduce accident risk by fostering a deeper understanding of traffic dynamics, hazard perception, and defensive driving techniques.&#34;
          </blockquote>

          <h3>1.1.1 Reducing Accident Risk for New Drivers</h3>

          <p>A central tenet of the VKU is the mitigation of accident risk for new drivers, a group identified as particularly vulnerable in the initial years of independent driving. The course is structured to sensitize participants to the most common causes of accidents and the inherent weaknesses often found in young or inexperienced drivers.</p>

          <p>By focusing on hazard perception and risk assessment, the VKU trains individuals to anticipate and react to potential dangers before they escalate into critical situations. This proactive approach is a cornerstone of defensive driving, a key philosophy promoted throughout the course.</p>

          <h3>1.1.2 Bridging Theory and Practice</h3>

          <p>A core function of the VKU is to bridge the gap between the theoretical knowledge gained during the initial licensing process and the practical skills required for safe, everyday driving <a href="https://www.fahrlos.ch/?page=en/vku" class="citation-link" target="_blank">[416]</a>. The course is designed to sharpen a learner&#39;s &#34;traffic sense,&#34; which involves the ability to correctly assess oneself, the vehicle, the road, other traffic partners, and environmental influences.</p>

          <h3>1.1.3 Legal Requirements and Certification</h3>

          <p>In Switzerland, the successful completion of the VKU is a legal prerequisite for obtaining a driver&#39;s license for categories A (motorcycles) and B (cars) <a href="https://www.fahrschule-drivein.ch/was-ist-ein-vku-kurs-und-wozu-dient-er" class="citation-link" target="_blank">[505]</a>. The course must be completed during the learner&#39;s permit phase, and a certificate of attendance is required to be eligible to register for the practical driving test.</p>

          <h2>1.2 Course Structure and Learning Objectives</h2>

          <p>The VKU is structured into four distinct modules, each focusing on a critical aspect of road safety and driving competence <a href="https://drivelab.ch/en/vku/" class="citation-link" target="_blank">[508]</a>. These modules are designed to build upon each other, providing a comprehensive and progressive learning experience.</p>

          <h3>1.2.1 Overview of the Four Core Modules</h3>

          <p>The VKU curriculum is divided into four core modules, each addressing a fundamental aspect of road safety and driving competence:</p>

          <ul>
            <li><strong>Traffic Vision:</strong> Physiological and psychological aspects of perception</li>
            <li><strong>Traffic Environment:</strong> Understanding various elements that make up the driving context</li>
            <li><strong>Traffic Dynamics:</strong> Physical principles of driving and vehicle forces</li>
            <li><strong>Traffic Tactics:</strong> Personal responsibility, defensive driving, and eco-friendly practices</li>
          </ul>

          <h3>1.2.2 Interactive Learning Methods</h3>

          <p>The VKU employs a variety of interactive learning methods to ensure that students are actively engaged in the educational process. These methods go beyond traditional lectures, incorporating learning videos, group work, and practical exercises <a href="https://www.driveup-fahrschule.ch/en/traffic-instruction-vku-at-the-driveup-driving-school/" class="citation-link" target="_blank">[470]</a>.</p>

          <h3>1.2.3 Attendance and Validity</h3>

          <p>The VKU consists of eight lessons, each lasting 50 minutes, which can be completed in various formats. The certificate of completion is valid for two years, after which the course must be retaken if the practical driving test has not been passed <a href="https://www.verkehrskunde4you.ch/startseite/" class="citation-link" target="_blank">[515]</a>.</p>
        </section>

        <!-- Traffic Vision Module -->
        <section id="traffic-vision">
          <h1>2. Module 1: Traffic Vision and Sensory Perception</h1>

          <img src="https://kimi-web-img.moonshot.cn/img/mikeeckman.com/85ee34e4e5b582b00ed8394bdcf69855bf07b7ec.jpg" alt="Human eye anatomy diagram showing field of vision" class="w-full rounded-xl shadow-lg my-8" size="medium" aspect="wide" color="brown" style="linedrawing" query="human eye anatomy diagram" referrerpolicy="no-referrer" data-modified="1" data-score="0.00"/>

          <h2>2.1 The Human Eye as a Control Organ</h2>

          <p>The human eye is the primary sensory organ for driving, acting as a sophisticated control system that gathers information about the surrounding environment <a href="https://drivelab.ch/en/vku/" class="citation-link" target="_blank">[448]</a>. In the context of the VKU, understanding the function and limitations of vision is paramount for developing safe driving habits.</p>

          <h3>2.1.1 Function and Importance of Vision in Driving</h3>

          <p>Vision is the most crucial sense for driving, providing approximately 90% of the information needed to operate a vehicle safely <a href="https://www.vico.fit/home-en/roadtraffic" class="citation-link" target="_blank">[456]</a>. The VKU course highlights the eye&#39;s role as a control organ, responsible for gathering and processing a vast amount of visual data in real-time.</p>

          <h3>2.1.2 Central vs. Peripheral Vision</h3>

          <p>The VKU curriculum distinguishes between central and peripheral vision, explaining their distinct roles in driving. Central vision, also known as foveal vision, is responsible for high-acuity tasks such as reading road signs, identifying traffic signals, and recognizing details. Peripheral vision encompasses the rest of the visual field and is crucial for detecting motion and changes in the environment.</p>

          <h3>2.1.3 Adapting to Light and Dark Conditions</h3>

          <p>A significant challenge for drivers is the need to adapt to varying light conditions, a process known as adaptation <a href="https://drivelab.ch/en/vku/" class="citation-link" target="_blank">[448]</a>. The VKU course addresses the physiological changes that occur in the eye when transitioning between bright and dark environments.</p>

          <h2>2.2 Understanding Visual Perception</h2>

          <p>Visual perception is the brain&#39;s interpretation of the information received from the eyes. The VKU course delves into the complexities of perception, explaining how the brain processes visual stimuli to create a coherent understanding of the traffic environment.</p>

          <h3>2.2.1 Static vs. Dynamic Vision</h3>

          <p>The VKU curriculum differentiates between static and dynamic vision, both of which are essential for safe driving. Static vision refers to the ability to see stationary objects clearly, such as road signs and lane markings. Dynamic vision is the ability to perceive moving objects and track their trajectory, crucial for judging the speed and distance of oncoming traffic.</p>

          <h3>2.2.2 Spatial Perception and Depth</h3>

          <p>Spatial perception is the ability to understand the three-dimensional layout of the environment and to judge distances accurately. This is a critical skill for driving, as it allows a driver to maintain a safe following distance, overtake safely, and park correctly.</p>

          <h3>2.2.3 Common Visual Disturbances and Their Effects</h3>

          <p>The VKU course acknowledges that various factors can impair vision and, consequently, driving ability. These visual disturbances include fatigue, glare, adverse weather conditions, and certain medical conditions <a href="https://www.bussgeldkatalog.org/muedigkeit-autofahren/" class="citation-link" target="_blank">[436]</a>.</p>

          <h2>2.3 Gaze Techniques and Optical Illusions</h2>

          <p>A key component of the VKU&#39;s first module is the development of effective gaze techniques and an awareness of optical illusions that can deceive a driver&#39;s perception. The course teaches learners how to use their eyes efficiently to gather information from the entire visual field.</p>

          <h3>2.3.1 Developing Effective Gaze Patterns</h3>

          <p>The VKU course emphasizes the importance of developing a systematic and efficient gaze pattern to maximize visual information intake while driving. This involves a continuous cycle of scanning the road ahead, checking mirrors, and monitoring the dashboard instruments.</p>

          <h3>2.3.2 The &#34;One-Eyed Car&#34; Illusion</h3>

          <p>The &#34;one-eyed car&#34; illusion is a common phenomenon where a driver misjudges the position of an oncoming vehicle at night. This occurs when an oncoming car has only one working headlight, which can make it difficult to accurately gauge its distance and speed.</p>

          <h3>2.3.3 Traffic Light and Distance Illusions</h3>

          <p>Optical illusions related to traffic lights and distance can also pose a significant risk to drivers. One such illusion occurs when two traffic lights are placed on a road with an ascending slope <a href="https://compillusion.mims.meiji.ac.jp/pdf/roadillusions_eng.pdf" class="citation-link" target="_blank">[451]</a>.</p>

          <h2>2.4 Sensorimotor Skills and Reaction</h2>

          <p>The VKU course covers the concept of sensorimotor skills, which are the coordinated movements that are guided by sensory input. In driving, this involves the complex interplay between what a driver sees, hears, and feels, and how they respond with their hands and feet.</p>

          <h3>2.4.1 The Perception-Reaction Process</h3>

          <p>The perception-reaction process is a fundamental concept in road safety. The process begins with <strong>perception</strong>, where the driver senses a stimulus, followed by <strong>identification</strong>, <strong>decision</strong>, and finally <strong>reaction</strong>, where the driver executes the physical movement.</p>

          <h3>2.4.2 Developing Driving Automatisms</h3>

          <p>Through practice and repetition, many driving tasks become automatic, meaning they can be performed with little conscious thought. These are known as driving automatisms <a href="https://drivelab.ch/en/vku/" class="citation-link" target="_blank">[448]</a>.</p>

          <h3>2.4.3 Factors Affecting Reaction Time</h3>

          <p>The VKU course highlights that reaction time is not a fixed value and can be influenced by a variety of factors including age, fatigue, alcohol and drugs, distraction, and experience level.</p>

          <!-- Perception-Reaction Process Diagram -->
          <div class="my-12 bg-white p-6 rounded-xl border border-sage/30">
            <h4 class="font-serif text-xl font-semibold text-forest mb-6 text-center">Perception-Reaction Process Flow</h4>
            <div class="mermaid-container">
              <div class="mermaid-controls">
                <button class="mermaid-control-btn zoom-in" title="放大">
                  <i class="fas fa-search-plus"></i>
                </button>
                <button class="mermaid-control-btn zoom-out" title="缩小">
                  <i class="fas fa-search-minus"></i>
                </button>
                <button class="mermaid-control-btn reset-zoom" title="重置">
                  <i class="fas fa-expand-arrows-alt"></i>
                </button>
                <button class="mermaid-control-btn fullscreen" title="全屏查看">
                  <i class="fas fa-expand"></i>
                </button>
              </div>
              <div class="mermaid">
                flowchart LR
                A[&#34;Stimulus Detection&#34;] --&gt; B[&#34;Perception&#34;]
                B --&gt; C[&#34;Identification&#34;]
                C --&gt; D[&#34;Decision Making&#34;]
                D --&gt; E[&#34;Physical Reaction&#34;]
                E --&gt; F[&#34;Vehicle Response&#34;]

                style A fill:#FAF7F0,stroke:#2D5016,stroke-width:2px,color:#2D5016
                style B fill:#E8F5E8,stroke:#2D5016,stroke-width:2px,color:#2D5016
                style C fill:#F0F8FF,stroke:#2D5016,stroke-width:2px,color:#2D5016
                style D fill:#FFF8E1,stroke:#2D5016,stroke-width:2px,color:#2D5016
                style E fill:#F5F5DC,stroke:#2D5016,stroke-width:2px,color:#2D5016
                style F fill:#9CAF88,stroke:#2D5016,stroke-width:2px,color:#2D5016
              </div>
            </div>
            <p class="text-sm text-stone mt-4 text-center">This diagram illustrates the sequential stages of driver response from initial stimulus detection to vehicle response, highlighting the critical cognitive and physical processes involved in safe driving reactions.</p>
          </div>
        </section>

        <!-- Traffic Environment Module -->
        <section id="traffic-environment">
          <h1>3. Module 2: The Traffic Environment</h1>

          <img src="https://kimi-web-img.moonshot.cn/img/preview.redd.it/12519c127a799de90c5baee65f275e4dfc037c8e.jpeg" alt="Busy Swiss traffic intersection with multiple vehicle types" class="w-full rounded-xl shadow-lg my-8" size="medium" aspect="wide" style="photo" query="Swiss road intersection" referrerpolicy="no-referrer" data-modified="1" data-score="0.00"/>

          <h2>3.1 Understanding Other Road Users</h2>

          <p>A significant portion of the VKU curriculum is dedicated to what is termed &#34;Partnerkunde,&#34; or the study of other road users. This concept is central to developing a cooperative and safe driving style. It moves beyond a simple understanding of traffic rules to a deeper appreciation of the diverse mix of individuals and vehicles that share the road.</p>

          <h3>3.1.1 Categorizing Road Users</h3>

          <p>The VKU course provides a structured framework for categorizing road users to help drivers quickly assess potential risks and interactions. The primary categories include large vehicles like trucks and tractors, standard passenger cars, smaller vulnerable vehicles such as motorcycles and bicycles, and non-vehicular road users <a href="https://de.wikibooks.org/wiki/Autofahren_(Schweiz):_VKU:_Verkehrsumwelt" class="citation-link" target="_blank">[351]</a>.</p>

          <h3>3.1.2 Assessing the Behavior of Vulnerable Road Users</h3>

          <p>A critical component of the VKU is learning to identify and protect vulnerable road users. These individuals are at a higher risk of severe injury in a collision and often have less protection or are less predictable in their movements. The training uses the &#34;3-A-Training&#34; model—Alter (Age), Aufmerksamkeit (Attention), and Absicht (Intention)—to help drivers assess these individuals.</p>

          <h3>3.1.3 Communication and Empathy in Traffic</h3>

          <p>Effective communication is a vital, though often non-verbal, aspect of safe driving. The VKU teaches that communication in traffic is achieved through a combination of vehicle signals, eye contact, and predictable driving behavior.</p>

          <h2>3.2 Street Science and Road Design</h2>

          <p>The &#34;Strassenkunde,&#34; or street science, component of the VKU delves into the physical and design elements of the road itself. This section aims to make drivers aware of how road design, markings, and surface conditions can influence vehicle control and safety.</p>

          <h3>3.2.1 Road Layouts: Curves, Gradients, and Junctions</h3>

          <p>The VKU provides detailed instruction on how different road layouts affect driving. This includes understanding the challenges posed by curves, where centrifugal force can push a vehicle outward, requiring a reduction in speed to maintain control. Gradients, both uphill and downhill, also present unique challenges.</p>

          <h3>3.2.2 The Role of Road Markings and Signage</h3>

          <p>Road markings and signage are the primary means of communication from road authorities to drivers. The course covers the full spectrum of Swiss road signs, from warning signs to regulatory signs and informational signs <a href="https://www.e-university.ch/index.php/en/e-driver-driving-theory-test/road-signs-in-switzerland" class="citation-link" target="_blank">[396]</a>.</p>

          <h3>3.2.3 Impact of Road Surface Conditions</h3>

          <p>The condition of the road surface has a profound impact on vehicle safety. The course teaches that factors like rain, snow, ice, and even loose gravel can drastically reduce tire grip, increasing stopping distances and the risk of skidding.</p>

          <h2>3.3 Seasonal and Diurnal Influences</h2>

          <p>The final part of the &#34;Traffic Environment&#34; module addresses the significant impact of time and weather on driving conditions. This section teaches that the driving environment is not static but changes dramatically with the seasons and the time of day.</p>

          <h3>3.3.1 Adapting to Weather Conditions</h3>

          <p>The VKU provides comprehensive guidance on adapting to a wide range of weather conditions. For rain, the course emphasizes the increased stopping distances and the risk of hydroplaning. In snowy and icy conditions, the focus shifts to maintaining traction through gentle inputs on the controls <a href="https://www.vku-st-gallen.ch/" class="citation-link" target="_blank">[409]</a>.</p>

          <h3>3.3.2 Challenges of Day vs. Night Driving</h3>

          <p>Driving at night presents a unique set of challenges that are thoroughly covered in the VKU. The primary issue is reduced visibility, which makes it harder to see pedestrians, cyclists, and road hazards. The course teaches the importance of using headlights correctly and managing glare from oncoming traffic.</p>

          <h3>3.3.3 Traffic Density and Accident Frequency</h3>

          <p>The VKU curriculum includes an analysis of how traffic patterns and accident risk change throughout the day and week. The course identifies typical rush hour periods as times of high traffic density and increased stress, when drivers are often in a hurry, leading to aggressive driving and higher accident risk.</p>
        </section>

        <!-- Traffic Dynamics Module -->
        <section id="traffic-dynamics">
          <h1>4. Module 3: Traffic Dynamics and Vehicle Physics</h1>

          <img src="https://kimi-web-img.moonshot.cn/img/www.racetechlab.com/dcddafd499edb8cd321619ce444293323c01e894.png" alt="Sports car demonstrating centrifugal force while cornering on a racetrack" class="w-full rounded-xl shadow-lg my-8" size="medium" aspect="wide" style="photo" query="sports car cornering on racetrack" referrerpolicy="no-referrer" data-modified="1" data-score="0.00"/>

          <h2>4.1 Forces in Motion</h2>

          <p>A vehicle in motion is subject to a complex interplay of forces. These forces determine its acceleration, deceleration, and ability to navigate turns safely. A fundamental understanding of these forces is a key objective of the VKU&#39;s &#34;Traffic Dynamics&#34; module <a href="https://drivelab.ch/en/vku/" class="citation-link" target="_blank">[522]</a>.</p>

          <h3>4.1.1 Acceleration and Driving Forces</h3>

          <p>When a driver presses the accelerator pedal, the engine generates a force that is transmitted to the wheels, propelling the vehicle forward. This force, known as the driving force, must overcome opposing forces such as air resistance and rolling friction to cause acceleration <a href="https://mechref.engr.illinois.edu/dyn/ava.html" class="citation-link" target="_blank">[536]</a>.</p>

          <p>The relationship between the driving force, the vehicle&#39;s mass, and its acceleration is a direct application of Newton&#39;s second law, F=ma. A more powerful engine can produce a greater driving force, leading to quicker acceleration. However, the effectiveness of this force is also dependent on the grip between the tires and the road surface.</p>

          <h3>4.1.2 Braking Forces and Deceleration</h3>

          <p>Braking is the process of applying a force to slow down or stop a vehicle. This is achieved by converting the vehicle&#39;s kinetic energy into heat through friction <a href="https://tracmodules.transportation.org/Modules/Traffic%20Technology/Activity%202%20-%20Braking%20Distance%20and%20Friction/Traffic%20Technology%20-%20Activity%202.pdf" class="citation-link" target="_blank">[548]</a>. When the driver presses the brake pedal, a hydraulic system activates brake pads, which clamp down on the brake discs attached to the wheels.</p>

          <p>The maximum possible braking force is limited by the frictional grip between the tires and the road surface. If the braking force exceeds this limit, the wheels will lock up and begin to slide, a dangerous situation that can lead to a loss of steering control.</p>

          <h3>4.1.3 Centrifugal Force in Curves</h3>

          <p>When a vehicle travels around a curve, it is constantly changing direction, which means it is accelerating, even if its speed remains constant. This change in direction is caused by a force directed towards the center of the curve, known as the centripetal force. The inertial resistance of the vehicle to this change in direction is perceived as centrifugal force <a href="https://library.ctr.utexas.edu/digitized/texasarchive/ms0867.pdf" class="citation-link" target="_blank">[544]</a>.</p>

          <h2>4.2 Vehicle Dynamics and Safety</h2>

          <p>Vehicle dynamics is the study of how a vehicle&#39;s design and condition affect its motion and stability. This is a key area of focus in the VKU&#39;s &#34;Traffic Dynamics&#34; module, covering topics such as wheel load, friction, shock absorbers, center of gravity, and self-steering behavior.</p>

          <h3>4.2.1 The Role of Friction and Tire Grip</h3>

          <p>Friction between the tires and the road surface is the single most important factor that allows a vehicle to accelerate, brake, and corner. Without sufficient friction, a driver would have no control over the vehicle&#39;s direction or speed <a href="https://www.teachengineering.org/lessons/view/cub_mechanics_lesson05" class="citation-link" target="_blank">[545]</a>.</p>

          <p>The amount of frictional force available is determined by the coefficient of friction of the road surface and the normal force pressing the surfaces together. The coefficient of friction varies greatly depending on road conditions—a dry asphalt road has high friction, while a wet or icy road has significantly reduced friction.</p>

          <h3>4.2.2 Center of Gravity and Vehicle Stability</h3>

          <p>The center of gravity (CG) of a vehicle is the point where its entire weight can be considered to be concentrated. The location of the CG has a profound impact on the vehicle&#39;s stability and handling characteristics. A vehicle with a low and centrally located CG will be more stable and less prone to rollover than a vehicle with a high CG.</p>

          <h3>4.2.3 Impact of Vehicle Load and Maintenance</h3>

          <p>The condition of a vehicle has a direct and significant impact on its safety and performance. Regular maintenance is not just about keeping the vehicle running smoothly; it is about ensuring that all safety-critical systems are functioning correctly, including brakes, tires, steering, suspension, and lights.</p>

          <h2>4.3 Calculating Stopping Distances</h2>

          <p>The total distance required to stop a vehicle is composed of two main parts: the reaction distance and the braking distance. The reaction distance is the distance traveled during the driver&#39;s perception and reaction time, while the braking distance is the distance traveled from when the brakes are applied until the vehicle stops.</p>

          <div class="bg-cream p-6 rounded-xl my-8">
            <h4 class="font-serif text-xl font-semibold text-forest mb-4">Stopping Distance Formula</h4>
            <p class="font-mono text-lg text-center mb-4">Total Stopping Distance = Reaction Distance + Braking Distance</p>
            <p class="text-sm text-stone text-center">Where: Reaction Distance = Speed × Reaction Time</p>
            <p class="text-sm text-stone text-center">Braking Distance = Speed² / (2 × μ × g)</p>
          </div>

          <h3>4.3.1 Reaction Distance</h3>

          <p>The reaction distance is determined by the driver&#39;s reaction time and the vehicle&#39;s speed. A typical reaction time for an alert driver is around one second, but this can be significantly longer if the driver is tired, distracted, or under the influence.</p>

          <h3>4.3.2 Braking Distance</h3>

          <p>The braking distance is influenced by several factors, including the vehicle&#39;s speed, the condition of the brakes and tires, and the coefficient of friction between the tires and the road surface. The braking distance is proportional to the square of the vehicle&#39;s speed.</p>

          <h3>4.3.3 Total Stopping Distance and Speed</h3>

          <p>The total stopping distance represents the total distance a vehicle will travel from the moment a hazard is perceived to the moment it comes to a complete stop. This is the most important distance for a driver to consider when determining a safe following distance.</p>

          <!-- Braking Distance Analysis -->
          <div class="my-12 bg-white p-6 rounded-xl border border-sage/30">
            <h4 class="font-serif text-xl font-semibold text-forest mb-6 text-center">Braking Distance Analysis</h4>
            <div class="mermaid-container">
              <div class="mermaid-controls">
                <button class="mermaid-control-btn zoom-in" title="放大">
                  <i class="fas fa-search-plus"></i>
                </button>
                <button class="mermaid-control-btn zoom-out" title="缩小">
                  <i class="fas fa-search-minus"></i>
                </button>
                <button class="mermaid-control-btn reset-zoom" title="重置">
                  <i class="fas fa-expand-arrows-alt"></i>
                </button>
                <button class="mermaid-control-btn fullscreen" title="全屏查看">
                  <i class="fas fa-expand"></i>
                </button>
              </div>
              <div class="mermaid">
                graph TD
                A[&#34;Vehicle Speed&#34;] --&gt; B{&#34;Road Condition&#34;}
                B --&gt;|&#34;Dry Road μ=0.7&#34;| C[&#34;Short Braking Distance&#34;]
                B --&gt;|&#34;Wet Road μ=0.4&#34;| D[&#34;Moderate Braking Distance&#34;]
                B --&gt;|&#34;Icy Road μ=0.1&#34;| E[&#34;Long Braking Distance&#34;]

                C --&gt; F[&#34;Safe Stopping&#34;]
                D --&gt; G[&#34;Marginal Stopping&#34;]
                E --&gt; H[&#34;Hazardous Stopping&#34;]

                style A fill:#FAF7F0,stroke:#2D5016,stroke-width:2px,color:#2D5016
                style B fill:#E8F5E8,stroke:#2D5016,stroke-width:2px,color:#2D5016
                style C fill:#F0F8FF,stroke:#2D5016,stroke-width:2px,color:#2D5016
                style D fill:#FFF8E1,stroke:#2D5016,stroke-width:2px,color:#2D5016
                style E fill:#F5F5DC,stroke:#2D5016,stroke-width:2px,color:#2D5016
                style F fill:#9CAF88,stroke:#2D5016,stroke-width:2px,color:#2D5016
                style G fill:#FFD700,stroke:#2D5016,stroke-width:2px,color:#2D5016
                style H fill:#FF6347,stroke:#2D5016,stroke-width:2px,color:#2D5016
              </div>
            </div>
            <p class="text-sm text-stone mt-4 text-center">This diagram analyzes how braking distances vary significantly with road conditions and vehicle speed. The friction coefficient (μ) directly impacts stopping ability, with icy roads requiring dramatically longer distances than dry conditions.</p>
          </div>

          <h2>4.4 Maneuvering in Traffic</h2>

          <p>Effective maneuvering in traffic requires understanding vehicle dynamics and applying proper techniques for various driving situations. The VKU provides comprehensive guidance on safe driving maneuvers.</p>

          <h3>4.4.1 Safe Overtaking and Passing</h3>

          <p>Overtaking is one of the most dangerous maneuvers a driver can perform, as it involves moving into the path of oncoming traffic. The VKU course provides detailed guidance on how to overtake safely, emphasizing the importance of proper assessment, signaling, and execution.</p>

          <h3>4.4.2 Lane Changing and Merging</h3>

          <p>Lane changing and merging are common maneuvers that require careful planning and execution. The VKU course teaches a systematic approach to these maneuvers, which can be remembered by the acronym SMOG: Signal, Mirror, Over-the-shoulder, Go.</p>

          <h3>4.4.3 Navigating Traffic Circles and Special Situations</h3>

          <p>Traffic circles, or roundabouts, are designed to improve traffic flow and reduce the risk of serious accidents. The VKU course provides clear instructions on how to navigate traffic circles safely, emphasizing the importance of yielding to traffic already in the circle and signaling intentions properly.</p>
        </section>

        <!-- Traffic Tactics Module -->
        <section id="traffic-tactics">
          <h1>5. Module 4: Traffic Tactics and Defensive Driving</h1>

          <img src="https://kimi-web-img.moonshot.cn/img/smithsolomon.com/cfaf46c24be101e1f1a031a1f9e64baa11678c46.jpg" alt="Driver using defensive driving techniques" class="w-full rounded-xl shadow-lg my-8" size="medium" aspect="wide" style="photo" query="defensive driving" referrerpolicy="no-referrer" data-modified="1" data-score="0.00"/>

          <h2>5.1 Personal Fitness for Driving</h2>

          <p>Personal fitness for driving encompasses physical and mental readiness to operate a vehicle safely. The VKU emphasizes that safe driving requires more than just technical skills—it demands personal responsibility and self-awareness.</p>

          <h3>5.1.1 The Dangers of Alcohol, Drugs, and Medication</h3>

          <p>Driving under the influence of alcohol, drugs, or certain medications is one of the most dangerous things a driver can do. These substances can impair judgment, slow reaction time, and reduce coordination, making it extremely difficult to operate a vehicle safely.</p>

          <p>The legal blood alcohol limit in Switzerland is 0.05%, but the course emphasizes that even a small amount of alcohol can impair driving ability. The safest course of action is to never drive after consuming any substance that could affect your ability to drive.</p>

          <h3>5.1.2 Managing Fatigue and Tiredness</h3>

          <p>Fatigue is a major contributing factor in many road accidents. A tired driver has a slower reaction time, reduced concentration, and an increased risk of falling asleep at the wheel. The VKU course teaches drivers to recognize the signs of fatigue and take appropriate action.</p>

          <h3>5.1.3 Avoiding Distractions</h3>

          <p>Distraction is another major cause of road accidents. A distracted driver is not paying full attention to the road and is therefore less able to react to hazards. The VKU course identifies several common sources of distraction, including mobile phones, passengers, and in-car entertainment systems.</p>

          <h2>5.2 Principles of Defensive Driving</h2>

          <p>Defensive driving is a proactive approach to road safety that involves anticipating potential hazards and taking steps to avoid them. The VKU introduces several core principles that form the foundation of defensive driving.</p>

          <h3>5.2.1 The &#34;What If&#34; Strategy</h3>

          <p>A key principle of defensive driving is the &#34;what if&#34; strategy. This involves constantly asking yourself &#34;what if&#34; questions as you drive. For example, &#34;What if the car ahead of me suddenly brakes?&#34; or &#34;What if a child runs out into the road?&#34;</p>

          <blockquote>
            &#34;By asking these questions, you are mentally preparing yourself for potential hazards and are more likely to react quickly and effectively if they occur.&#34;
          </blockquote>

          <h3>5.2.2 Maintaining a Safety Margin</h3>

          <p>Maintaining a safety margin is another fundamental principle of defensive driving. This means keeping a safe distance from the vehicle ahead of you, as well as from the vehicles on either side of you. A safe following distance gives you enough time to react if the vehicle ahead of you suddenly brakes or stops.</p>

          <p>The two-second rule is a good guideline for maintaining a safe following distance in good conditions. In adverse weather conditions, you should increase your following distance to four seconds or more.</p>

          <h3>5.2.3 Adapting to the Behavior of Others</h3>

          <p>Defensive driving also involves adapting your own driving to the behavior of others. This means being aware of the actions of other drivers and anticipating what they might do next. By being aware of the behavior of others and adapting your own driving accordingly, you can reduce the risk of being involved in an accident.</p>

          <h2>5.3 Eco-Driving and Environmental Awareness</h2>

          <p>Eco-driving is a style of driving that is designed to reduce fuel consumption and emissions. The VKU course teaches several techniques for eco-driving, emphasizing that environmentally conscious driving is also safer and more economical.</p>

          <h3>5.3.1 Reducing Fuel Consumption and Emissions</h3>

          <p>The VKU course teaches several techniques for eco-driving, such as maintaining a steady speed, avoiding rapid acceleration and hard braking, and anticipating traffic flow to avoid unnecessary stops and starts. By driving smoothly and efficiently, you can significantly reduce your fuel consumption and your carbon footprint.</p>

          <h3>5.3.2 Anticipatory Driving and Smooth Acceleration</h3>

          <p>Anticipatory driving is a key component of eco-driving. This involves looking ahead and anticipating what is going to happen on the road. By anticipating traffic lights, intersections, and the actions of other drivers, you can adjust your speed and avoid unnecessary braking and acceleration.</p>

          <h3>5.3.3 Vehicle Maintenance for Efficiency</h3>

          <p>Proper vehicle maintenance is also important for fuel efficiency. A well-maintained vehicle will run more efficiently and use less fuel. The VKU course encourages drivers to keep their tires properly inflated, as under-inflated tires can increase fuel consumption.</p>

          <h2>5.4 Modern Vehicle Technology</h2>

          <p>Modern vehicles are equipped with a range of electronic assistance systems designed to improve safety and stability. The VKU course provides an overview of these technologies and emphasizes their role as aids to safe driving, not replacements for driver responsibility.</p>

          <h3>5.4.1 Understanding Electronic Assistance Systems</h3>

          <p>The VKU course provides an overview of common electronic assistance systems, including Anti-lock Braking Systems (ABS) and Electronic Stability Programs (ESP). ABS prevents the wheels from locking up during hard braking, while ESP helps prevent skids and slides by automatically applying brakes to individual wheels.</p>

          <h3>5.4.2 The Role of Driver Assistance Systems</h3>

          <p>Many modern vehicles are equipped with additional driver assistance systems, such as adaptive cruise control, lane departure warning, and blind spot monitoring. These systems use sensors and cameras to monitor the road and provide warnings or take corrective action if they detect a potential hazard.</p>

          <h3>5.4.3 Limitations of Technology and Driver Responsibility</h3>

          <p>While modern vehicle technology can be a valuable aid to safety, it is important to understand its limitations. These systems are not a substitute for an attentive and responsible driver. The VKU course emphasizes that the driver is always ultimately responsible for the safe operation of the vehicle.</p>

          <!-- Defensive Driving Strategy Framework -->
          <div class="my-12 bg-white p-6 rounded-xl border border-sage/30">
            <h4 class="font-serif text-xl font-semibold text-forest mb-6 text-center">Defensive Driving Strategy Framework</h4>
            <div class="mermaid-container">
              <div class="mermaid-controls">
                <button class="mermaid-control-btn zoom-in" title="放大">
                  <i class="fas fa-search-plus"></i>
                </button>
                <button class="mermaid-control-btn zoom-out" title="缩小">
                  <i class="fas fa-search-minus"></i>
                </button>
                <button class="mermaid-control-btn reset-zoom" title="重置">
                  <i class="fas fa-expand-arrows-alt"></i>
                </button>
                <button class="mermaid-control-btn fullscreen" title="全屏查看">
                  <i class="fas fa-expand"></i>
                </button>
              </div>
              <div class="mermaid">
                graph TB
                A[&#34;Defensive Driving&#34;] --&gt; B[&#34;Personal Fitness&#34;]
                A --&gt; C[&#34;Environmental Awareness&#34;]
                A --&gt; D[&#34;Vehicle Control&#34;]

                B --&gt; E[&#34;Alcohol/Drug Avoidance&#34;]
                B --&gt; F[&#34;Fatigue Management&#34;]
                B --&gt; G[&#34;Distraction Minimization&#34;]

                C --&gt; H[&#34;Weather Adaptation&#34;]
                C --&gt; I[&#34;Road Condition Assessment&#34;]
                C --&gt; J[&#34;Traffic Pattern Recognition&#34;]

                D --&gt; K[&#34;Speed Management&#34;]
                D --&gt; L[&#34;Following Distance&#34;]
                D --&gt; M[&#34;Emergency Maneuvers&#34;]

                style A fill:#9CAF88,stroke:#2D5016,stroke-width:3px,color:#2D5016
                style B fill:#E8F5E8,stroke:#2D5016,stroke-width:2px,color:#2D5016
                style C fill:#F0F8FF,stroke:#2D5016,stroke-width:2px,color:#2D5016
                style D fill:#FFF8E1,stroke:#2D5016,stroke-width:2px,color:#2D5016
                style E fill:#FAF7F0,stroke:#2D5016,stroke-width:1px,color:#2D5016
                style F fill:#FAF7F0,stroke:#2D5016,stroke-width:1px,color:#2D5016
                style G fill:#FAF7F0,stroke:#2D5016,stroke-width:1px,color:#2D5016
                style H fill:#FAF7F0,stroke:#2D5016,stroke-width:1px,color:#2D5016
                style I fill:#FAF7F0,stroke:#2D5016,stroke-width:1px,color:#2D5016
                style J fill:#FAF7F0,stroke:#2D5016,stroke-width:1px,color:#2D5016
                style K fill:#FAF7F0,stroke:#2D5016,stroke-width:1px,color:#2D5016
                style L fill:#FAF7F0,stroke:#2D5016,stroke-width:1px,color:#2D5016
                style M fill:#FAF7F0,stroke:#2D5016,stroke-width:1px,color:#2D5016
              </div>
            </div>
            <p class="text-sm text-stone mt-4 text-center">This framework outlines the comprehensive approach to defensive driving taught in the VKU, emphasizing the three core pillars of personal fitness, environmental awareness, and vehicle control, along with their specific components.</p>
          </div>
        </section>

        <!-- Conclusion -->
        <section class="bg-gradient-to-br from-sage/10 to-forest/10 p-8 rounded-2xl mt-16">
          <h2 class="font-serif text-3xl font-semibold text-forest mb-6">Mastering Road Safety Through VKU</h2>
          <p class="text-lg leading-relaxed mb-4">
            The Verkehrskundeunterricht provides a comprehensive foundation for new drivers, equipping them with the knowledge, skills, and attitudes necessary for a lifetime of safe and responsible driving. By understanding the principles of traffic vision, environmental awareness, vehicle dynamics, and defensive tactics, drivers can navigate the complexities of modern traffic with confidence and competence.
          </p>
          <p class="text-lg leading-relaxed">
            The course&#39;s emphasis on proactive thinking, risk assessment, and continuous learning ensures that new drivers are not just prepared for their practical driving test, but for the ongoing challenges of safe vehicle operation throughout their driving careers.
          </p>
        </section>

      </div>
    </main>

    <script>
        // Initialize Mermaid with custom configuration
        mermaid.initialize({ 
            startOnLoad: true, 
            theme: 'base',
            themeVariables: {
                primaryColor: '#FAF7F0',
                primaryTextColor: '#2D5016',
                primaryBorderColor: '#2D5016',
                lineColor: '#9CAF88',
                secondaryColor: '#E8F5E8',
                tertiaryColor: '#F0F8FF',
                background: '#FFFFFF',
                mainBkg: '#FAF7F0',
                secondBkg: '#E8F5E8',
                tertiaryBkg: '#F0F8FF'
            },
            flowchart: {
                useMaxWidth: false,
                htmlLabels: true,
                curve: 'basis'
            },
            graph: {
                useMaxWidth: false,
                htmlLabels: true
            }
        });

        // Initialize Mermaid Controls for zoom and pan
        function initializeMermaidControls() {
            const containers = document.querySelectorAll('.mermaid-container');

            containers.forEach(container => {
            const mermaidElement = container.querySelector('.mermaid');
            let scale = 1;
            let isDragging = false;
            let startX, startY, translateX = 0, translateY = 0;

            // 触摸相关状态
            let isTouch = false;
            let touchStartTime = 0;
            let initialDistance = 0;
            let initialScale = 1;
            let isPinching = false;

            // Zoom controls
            const zoomInBtn = container.querySelector('.zoom-in');
            const zoomOutBtn = container.querySelector('.zoom-out');
            const resetBtn = container.querySelector('.reset-zoom');
            const fullscreenBtn = container.querySelector('.fullscreen');

            function updateTransform() {
                mermaidElement.style.transform = `translate(${translateX}px, ${translateY}px) scale(${scale})`;

                if (scale > 1) {
                container.classList.add('zoomed');
                } else {
                container.classList.remove('zoomed');
                }

                mermaidElement.style.cursor = isDragging ? 'grabbing' : 'grab';
            }

            if (zoomInBtn) {
                zoomInBtn.addEventListener('click', () => {
                scale = Math.min(scale * 1.25, 4);
                updateTransform();
                });
            }

            if (zoomOutBtn) {
                zoomOutBtn.addEventListener('click', () => {
                scale = Math.max(scale / 1.25, 0.3);
                if (scale <= 1) {
                    translateX = 0;
                    translateY = 0;
                }
                updateTransform();
                });
            }

            if (resetBtn) {
                resetBtn.addEventListener('click', () => {
                scale = 1;
                translateX = 0;
                translateY = 0;
                updateTransform();
                });
            }

            if (fullscreenBtn) {
                fullscreenBtn.addEventListener('click', () => {
                if (container.requestFullscreen) {
                    container.requestFullscreen();
                } else if (container.webkitRequestFullscreen) {
                    container.webkitRequestFullscreen();
                } else if (container.msRequestFullscreen) {
                    container.msRequestFullscreen();
                }
                });
            }

            // Mouse Events
            mermaidElement.addEventListener('mousedown', (e) => {
                if (isTouch) return; // 如果是触摸设备，忽略鼠标事件

                isDragging = true;
                startX = e.clientX - translateX;
                startY = e.clientY - translateY;
                mermaidElement.style.cursor = 'grabbing';
                updateTransform();
                e.preventDefault();
            });

            document.addEventListener('mousemove', (e) => {
                if (isDragging && !isTouch) {
                translateX = e.clientX - startX;
                translateY = e.clientY - startY;
                updateTransform();
                }
            });

            document.addEventListener('mouseup', () => {
                if (isDragging && !isTouch) {
                isDragging = false;
                mermaidElement.style.cursor = 'grab';
                updateTransform();
                }
            });

            document.addEventListener('mouseleave', () => {
                if (isDragging && !isTouch) {
                isDragging = false;
                mermaidElement.style.cursor = 'grab';
                updateTransform();
                }
            });

            // 获取两点之间的距离
            function getTouchDistance(touch1, touch2) {
                return Math.hypot(
                touch2.clientX - touch1.clientX,
                touch2.clientY - touch1.clientY
                );
            }

            // Touch Events - 触摸事件处理
            mermaidElement.addEventListener('touchstart', (e) => {
                isTouch = true;
                touchStartTime = Date.now();

                if (e.touches.length === 1) {
                // 单指拖动
                isPinching = false;
                isDragging = true;

                const touch = e.touches[0];
                startX = touch.clientX - translateX;
                startY = touch.clientY - translateY;

                } else if (e.touches.length === 2) {
                // 双指缩放
                isPinching = true;
                isDragging = false;

                const touch1 = e.touches[0];
                const touch2 = e.touches[1];
                initialDistance = getTouchDistance(touch1, touch2);
                initialScale = scale;
                }

                e.preventDefault();
            }, { passive: false });

            mermaidElement.addEventListener('touchmove', (e) => {
                if (e.touches.length === 1 && isDragging && !isPinching) {
                // 单指拖动
                const touch = e.touches[0];
                translateX = touch.clientX - startX;
                translateY = touch.clientY - startY;
                updateTransform();

                } else if (e.touches.length === 2 && isPinching) {
                // 双指缩放
                const touch1 = e.touches[0];
                const touch2 = e.touches[1];
                const currentDistance = getTouchDistance(touch1, touch2);

                if (initialDistance > 0) {
                    const newScale = Math.min(Math.max(
                    initialScale * (currentDistance / initialDistance),
                    0.3
                    ), 4);
                    scale = newScale;
                    updateTransform();
                }
                }

                e.preventDefault();
            }, { passive: false });

            mermaidElement.addEventListener('touchend', (e) => {
                // 重置状态
                if (e.touches.length === 0) {
                isDragging = false;
                isPinching = false;
                initialDistance = 0;

                // 延迟重置isTouch，避免鼠标事件立即触发
                setTimeout(() => {
                    isTouch = false;
                }, 100);
                } else if (e.touches.length === 1 && isPinching) {
                // 从双指变为单指，切换为拖动模式
                isPinching = false;
                isDragging = true;

                const touch = e.touches[0];
                startX = touch.clientX - translateX;
                startY = touch.clientY - translateY;
                }

                updateTransform();
            });

            mermaidElement.addEventListener('touchcancel', (e) => {
                isDragging = false;
                isPinching = false;
                initialDistance = 0;

                setTimeout(() => {
                isTouch = false;
                }, 100);

                updateTransform();
            });

            // Enhanced wheel zoom with better center point handling
            container.addEventListener('wheel', (e) => {
                e.preventDefault();
                const rect = container.getBoundingClientRect();
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;

                const delta = e.deltaY > 0 ? 0.9 : 1.1;
                const newScale = Math.min(Math.max(scale * delta, 0.3), 4);

                // Adjust translation to zoom towards center
                if (newScale !== scale) {
                const scaleDiff = newScale / scale;
                translateX = translateX * scaleDiff;
                translateY = translateY * scaleDiff;
                scale = newScale;

                if (scale <= 1) {
                    translateX = 0;
                    translateY = 0;
                }

                updateTransform();
                }
            });

            // Initialize display
            updateTransform();
            });
        }

        // Initialize mermaid controls after page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Wait for mermaid to render
            setTimeout(() => {
                initializeMermaidControls();
            }, 1000);
        });

        // Mobile TOC Toggle
        function toggleTOC() {
            const toc = document.getElementById('toc');
            toc.classList.toggle('open');
        }

        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Close mobile TOC when clicking outside
        document.addEventListener('click', function(e) {
            const toc = document.getElementById('toc');
            const toggleButton = document.querySelector('button[onclick="toggleTOC()"]');
            
            if (window.innerWidth <= 1024 && 
                !toc.contains(e.target) && 
                !toggleButton.contains(e.target)) {
                toc.classList.remove('open');
            }
        });

        // Highlight active section in TOC
        window.addEventListener('scroll', function() {
            const sections = document.querySelectorAll('section[id]');
            const tocLinks = document.querySelectorAll('#toc a[href^="#"]');
            
            let currentSection = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (window.scrollY >= sectionTop) {
                    currentSection = section.getAttribute('id');
                }
            });
            
            tocLinks.forEach(link => {
                link.classList.remove('font-semibold', 'text-forest');
                if (link.getAttribute('href') === `#${currentSection}`) {
                    link.classList.add('font-semibold', 'text-forest');
                }
            });
        });

        // Close mobile TOC when a TOC link is clicked
        document.querySelectorAll('#toc a[href^="#"]').forEach(link => {
            link.addEventListener('click', function() {
                if (window.innerWidth <= 1024) {
                    const toc = document.getElementById('toc');
                    toc.classList.remove('open');
                }
            });
        });
    </script>
  


</body></html>
